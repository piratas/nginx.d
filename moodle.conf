server {
  listen 80;
  listen [::]:80;
  server_name escolapirata.org;
  return 307 https://moodle.escolapirata.org$request_uri;
}
server {
  listen 80;
  listen [::]:80;
  server_name *.escolapirata.org;
  return 307 http://moodle.escolapirata.org$request_uri;
}
server {
  listen 80;
  listen [::]:80;
  server_name escolapirata.xyz;
  return 307 https://moodle.escolapirata.xyz$request_uri;
}
server {
  listen 80;
  listen [::]:80;
  server_name *.escolapirata.xyz;
  return 307 http://moodle.escolapirata.xyz$request_uri;
}

server {
  listen 80;
  listen [::]:80;
  server_name moodle.escolapirata.xyz;
  return 301 https://moodle.escolapirata.xyz$request_uri;
}
server {
  listen 80;
  listen [::]:80;
  server_name *.moodle.escolapirata.xyz;
  return 301 http://moodle.escolapirata.xyz$request_uri;
}

# server {
# listen 443 ssl;
# listen [::]:443 ssl;
# ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
# ssl_prefer_server_ciphers on;
# ssl_ciphers "EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH";
# ssl_ecdh_curve secp384r1;
# ssl_session_cache shared:SSL:10m;
# ssl_session_tickets off;
# ssl_stapling on;
# ssl_stapling_verify on;
# resolver 208.67.220.220 208.67.222.222 valid=300s;
# resolver_timeout 5s;
# add_header Strict-Transport-Security "max-age=63072000; includeSubdomains; preload";
# #add_header X-Frame-Options SAMEORIGIN;
# add_header X-Content-Type-Options nosniff;
# ssl_certificate /etc/letsencrypt/live/escolapirata.org-0001/fullchain.pem;
# ssl_certificate_key /etc/letsencrypt/live/escolapirata.org-0001/privkey.pem;
# ssl_trusted_certificate /etc/letsencrypt/live/escolapirata.org-0001/chain.pem;
# 
# server_name moodle.escolapirata.org;
# root /var/www/git/moodle.escolapirata.org;
# index index.php index.html index.htm;
# client_max_body_size 1228M;
# client_body_timeout 360s;
# 
# location / {
# # First attempt to serve request as file
# try_files $uri $uri/index.php;
# }
# 
# # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
# #
# location ~ [^/]\.php(/|$) {
# fastcgi_split_path_info ^(.+?\.php)(/.*)$;
# if (!-f $document_root$fastcgi_script_name) {
# return 404;
# }
# 
# #free to choose between port or sock file.
# #fastcgi_pass 127.0.0.1:9000;
# fastcgi_pass unix:/var/run/php5-fpm-moodle.sock;
# fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
# #fastcgi_pass unix:/run/php/php7.0-fpm.sock;
# fastcgi_index index.php;
# include fastcgi_params;
# }
# }
# server {
# listen 443 ssl;
# listen [::]:443 ssl;
# ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
# ssl_prefer_server_ciphers on;
# ssl_ciphers "EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH";
# ssl_ecdh_curve secp384r1;
# ssl_session_cache shared:SSL:10m;
# ssl_session_tickets off;
# ssl_stapling on;
# ssl_stapling_verify on;
# resolver 208.67.220.220 208.67.222.222 valid=300s;
# resolver_timeout 5s;
# add_header Strict-Transport-Security "max-age=63072000; includeSubdomains; preload";
# #add_header X-Frame-Options SAMEORIGIN;
# add_header X-Content-Type-Options nosniff;
# ssl_certificate /etc/letsencrypt/live/escolapirata.xyz-0001/fullchain.pem;
# ssl_certificate_key /etc/letsencrypt/live/escolapirata.xyz-0001/privkey.pem;
# ssl_trusted_certificate /etc/letsencrypt/live/escolapirata.xyz-0001/chain.pem;
# 
# server_name moodle.escolapirata.xyz;
# root /var/www/git/moodle.escolapirata.org;
# index index.php index.html index.htm;
# client_max_body_size 1228M;
# client_body_timeout 360s;
# 
# location / {
# # First attempt to serve request as file
# try_files $uri $uri/index.php;
# }
# 
# # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
# #
# location ~ [^/]\.php(/|$) {
# fastcgi_split_path_info ^(.+?\.php)(/.*)$;
# if (!-f $document_root$fastcgi_script_name) {
# return 404;
# }
# 
# #free to choose between port or sock file.
# #fastcgi_pass 127.0.0.1:9000;
# fastcgi_pass unix:/var/run/php5-fpm-moodle.sock;
# fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
# #fastcgi_pass unix:/run/php/php7.0-fpm.sock;
# fastcgi_index index.php;
# include fastcgi_params;
# }
# }


